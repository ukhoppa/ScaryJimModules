-- WildHorsesModule.lua

local HorseModule = {}

HorseModule.CurrentIsland = "Unknown"

-- Table of horse info
HorseModule.Horses = {} -- { {instance=Model, breed="Breed1", colour="Red", mane="Black", tail="White"} }

-- Function to detect current island
function HorseModule.DetectIsland()
    local char = game.Players.LocalPlayer.Character
    local islandsFolder = workspace:FindFirstChild("Islands")
    if not islandsFolder or not char then
        HorseModule.CurrentIsland = "Unknown"
        return nil
    end
    local currentParent = char.Parent
    while currentParent and currentParent ~= islandsFolder and currentParent ~= workspace do
        if currentParent.Parent == islandsFolder then
            HorseModule.CurrentIsland = currentParent.Name
            return currentParent
        end
        currentParent = currentParent.Parent
    end
    HorseModule.CurrentIsland = "Unknown"
    return nil
end

-- Empty scan function for now
function HorseModule.ScanHorses()
    HorseModule.DetectIsland()
    -- Just return empty table for now
    return HorseModule.Horses
end

-- Update callback table
HorseModule._callbacks = {}
function HorseModule.OnUpdate(func)
    table.insert(HorseModule._callbacks, func)
end

-- Call update
function HorseModule.TriggerUpdate()
    for _, f in ipairs(HorseModule._callbacks) do
        f(HorseModule.Horses)
    end
end

return HorseModule
