-- WildHorsesModule.lua
local WildHorsesModule = {}

-- Current island
local CurrentIsland = Instance.new("StringValue")
CurrentIsland.Name = "CurrentIsland"
CurrentIsland.Value = "Unknown"
CurrentIsland.Parent = game:GetService("ReplicatedStorage") -- optional storage

WildHorsesModule.CurrentIsland = CurrentIsland.Value

-- Helper: get local character
local function getChar()
    return game.Players.LocalPlayer and game.Players.LocalPlayer.Character
end

-- Detect current island based on workspace hierarchy
local function detectIsland()
    local char = getChar()
    local islandsFolder = workspace:FindFirstChild("Islands")
    if not islandsFolder then
        CurrentIsland.Value = "Unknown"
        return nil
    end
    local currentParent = char and char.Parent
    while currentParent and currentParent ~= islandsFolder and currentParent ~= workspace do
        if currentParent.Parent == islandsFolder then
            CurrentIsland.Value = currentParent.Name
            return currentParent
        end
        currentParent = currentParent.Parent
    end
    CurrentIsland.Value = "Unknown"
    return nil
end

-- Update CurrentIsland every second
task.spawn(function()
    while true do
        detectIsland()
        WildHorsesModule.CurrentIsland = CurrentIsland.Value
        task.wait(1)
    end
end)

-- Placeholder for future horse logic
function WildHorsesModule.ScanHorses()
    return {}
end

function WildHorsesModule.OnUpdate(callback)
    -- future updates
end

return WildHorsesModule
